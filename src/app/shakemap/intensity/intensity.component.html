<ng-container *ngIf="eventService?.product$ | async; let shakemap">
  <div class="downloads" *ngIf="shakemap | sharedProductContent:
      'download/intensity.jpg':'download/intensity.pdf':'download/intensity.png'">

      Download Intensity Image:
    <a *ngIf="shakemap | sharedProductContent:'download/intensity.png' as image"
      target="_blank"
      [href]="image.url"
      download="intensity.png">
      PNG ({{ image.length / 1000 | sharedNumber:0:'kb' }})
    </a>
    <a *ngIf="shakemap | sharedProductContent:'download/intensity.jpg' as image"
      target="_blank"
      [href]="image.url"
      download="intensity.jpg">
      JPG ({{ image.length / 1000 | sharedNumber:0:'kb' }})
    </a>
    <a *ngIf="shakemap | sharedProductContent:'download/intensity.pdf' as image"
      target="_blank"
      [href]="image.url"
      download="intensity.pdf">
      PDF ({{ image.length / 1000 | sharedNumber:0:'kb' }})
    </a>
    <a href="javascript:void(0)"
        (click)="scrollToDownloads()">
      More...
    </a>
  </div>

  <div class="layers">
    <form>
      <mat-radio-group [(ngModel)]="overlays" name="overlays">
        <mat-radio-button [value]="imageOverlays"
            name="raster">
          Image Overlay
        </mat-radio-button>
        <mat-radio-button [value]="contourOverlays"
            name="contours">
          Contours
        </mat-radio-button>
      </mat-radio-group>
    </form>
  </div>

  <div class="map-container">
    <div class="shakemap-map"
        *ngIf="shakemap | sharedProductContent:
        'download/intensity_overlay.png':'download/ii_overlay.png';
        else noOverlay">
      <a [routerLink]="'../../map'"
        [queryParams]="{
            'shakemap-code': shakemap?.code,
            'shakemap-source': shakemap?.source,
            'shakemap-intensity': overlays === imageOverlays,
            'shakemap-mmi-contours': overlays === contourOverlays,
            'shakemap-stations': true
          }">
        <shared-map [overlays]="shakemap | shakemapOverlays:overlays"
            [showScaleControl]="true"
            [showAttributionControl]="false"
            [bounds]="shakemap | sharedGetMapBounds:true">
        </shared-map>
      </a>

      <shakemap-legend
          class="intensity-legend"
          [legendType]="'mmi'"
          [product]="shakemap">
      </shakemap-legend>
    </div>

    <ng-template #noOverlay>
      <img *ngIf="shakemap | sharedProductContent:'download/intensity.jpg' as image;
          else noImage"
          src="{{ image.url }}"
          alt="ShakeMap intensity image" />

      <ng-template #noImage>
        <h1>No intensity available for this event</h1>
      </ng-template>
    </ng-template>
  </div>
</ng-container>